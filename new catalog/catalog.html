<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <title>Products</title>

    <style>
      #product-list {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 20px;
        margin-top: 20px;
      }

      .product-card {
        border: 1px solid #ddd;
        border-radius: 10px;
        padding: 15px;
        background: #fff;
        box-shadow: 0 0 8px rgba(0, 0, 0, 0.06);
        font-family: Arial, sans-serif;
      }

      .product-img-box {
        position: relative;
        width: 100%;
        height: 220px;
        overflow: hidden;
      }

      .product-img-box img {
        width: 100%;
        height: 100%;
        object-fit: contain;
      }

      .arrow {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        font-size: 26px;
        font-weight: bold;
        background: rgba(255, 255, 255, 0.8);
        width: 32px;
        height: 32px;
        border-radius: 50%;
        text-align: center;
        line-height: 32px;
        cursor: pointer;
        user-select: none;
        color: #a50034;
      }

      .arrow.left {
        left: 5px;
      }
      .arrow.right {
        right: 5px;
      }

      .product-title {
        font-size: 16px;
        font-weight: 600;
        margin: 12px 0 6px;
        height: 50px;
      }

      .product-description {
        font-size: 14px;
        color: #333;
      }

      .pagination {
        margin-top: 25px;
        text-align: center;
      }

      .pagination button {
        border: 1px solid #aaa;
        padding: 7px 13px;
        margin: 3px;
        background: #fff;
        cursor: pointer;
        border-radius: 5px;
      }

      .pagination button.active {
        background: #a50034;
        color: #fff;
        border-color: #a50034;
      }
    </style>
  </head>
  <body>
    <div id="product-list"></div>
    <div id="pagination" class="pagination"></div>

    <script>
      let products = [];
      const itemsPerPage = 10;
      let currentPage = 1;

      fetch(
        "https://raw.githubusercontent.com/alen-omarbayev/LG/main/new%20catalog/products.json"
      )
        .then((res) => res.json())
        .then((data) => {
          products = data;
          renderProducts();
          renderPagination();
        });

      function renderProducts() {
        const list = document.getElementById("product-list");
        list.innerHTML = "";

        const start = (currentPage - 1) * itemsPerPage;
        const end = start + itemsPerPage;
        const pageProducts = products.slice(start, end);

        pageProducts.forEach((p, index) => {
          p.currentImg = 0;

          const card = document.createElement("div");
          card.className = "product-card";

          card.innerHTML = `
                <div class="product-title">${p.title}</div>
                <div class="product-img-box" data-index="${start + index}">
                    <span class="arrow left">‹</span>
                    <img src="${p.images[0]}" alt="${p.model}">
                    <span class="arrow right">›</span>
                </div>
                <div class="product-description">${p.description}</div>
            `;

          list.appendChild(card);
        });

        setupArrows();
      }

      function setupArrows() {
        document.querySelectorAll(".arrow.left").forEach((btn) => {
          btn.onclick = () => changeImage(btn.parentElement.dataset.index, -1);
        });
        document.querySelectorAll(".arrow.right").forEach((btn) => {
          btn.onclick = () => changeImage(btn.parentElement.dataset.index, 1);
        });
      }

      function changeImage(index, dir) {
        const product = products[index];
        product.currentImg =
          (product.currentImg + dir + product.images.length) %
          product.images.length;

        document.querySelector(
          `.product-img-box[data-index="${index}"] img`
        ).src = product.images[product.currentImg];
      }

      function renderPagination() {
        const pages = Math.ceil(products.length / itemsPerPage);
        const container = document.getElementById("pagination");
        container.innerHTML = "";

        for (let i = 1; i <= pages; i++) {
          const btn = document.createElement("button");
          btn.textContent = i;

          if (i === currentPage) btn.classList.add("active");

          btn.onclick = () => {
            currentPage = i;
            renderProducts();
            renderPagination();
          };

          container.appendChild(btn);
        }
      }
    </script>
  </body>
</html>
